<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produto API Test</title>
</head>
<body>
<h1>Produto API Test</h1>

<div>
    <h2>Add Produto</h2>
    <form id="addProdutoForm">
        <label for="cod_produto">Código:</label>
        <input type="text" id="cod_produto" name="cod_produto"><br><br>
        <label for="nome_produto">Nome:</label>
        <input type="text" id="nome_produto" name="nome_produto"><br><br>
        <label for="descricao">Descrição:</label>
        <input type="text" id="descricao" name="descricao"><br><br>
        <label for="valor">Valor:</label>
        <input type="text" id="valor" name="valor"><br><br>
        <button type="submit">Add Produto</button>
    </form>
</div>

<hr>

<div>
    <h2>Get Produto by ID</h2>
    <form id="getProdutoForm">
        <label for="getById">ID:</label>
        <input type="text" id="getById" name="getById"><br><br>
        <button type="submit">Get Produto</button>
    </form>
    <p id="produtoById"></p>
</div>

<hr>

<div>
    <h2>Get All Produtos</h2>
    <button id="getAllProdutos">Get All Produtos</button>
    <ul id="produtosList"></ul>
</div>

<hr>

<div>
    <h2>Delete Produto by ID</h2>
    <form id="deleteProdutoForm">
        <label for="deleteById">ID:</label>
        <input type="text" id="deleteById" name="deleteById"><br><br>
        <button type="submit">Delete Produto</button>
    </form>
    <p id="deleteStatus"></p>
</div>

<script>
    document.getElementById('addProdutoForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const formData = {
            cod_produto: document.getElementById('cod_produto').value,
            nome_produto: document.getElementById('nome_produto').value,
            descricao: document.getElementById('descricao').value,
            valor: document.getElementById('valor').value
        };

        fetch('/produtos/add', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
        })
            .then(response => {
                if (response.ok) {
                    alert('Produto adicionado com sucesso!');
                    this.reset();
                } else {
                    alert('Erro ao adicionar produto!');
                }
            });
    });

    document.getElementById('getProdutoForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const getById = document.getElementById('getById').value;

        fetch(`/produtos/${getById}`)
            .then(response => response.json())
            .then(data => {
                document.getElementById('produtoById').innerText = JSON.stringify(data);
            });
    });

    document.getElementById('getAllProdutos').addEventListener('click', function() {
        fetch('/produtos/all')
            .then(response => response.json())
            .then(data => {
                const produtosList = document.getElementById('produtosList');
                produtosList.innerHTML = '';
                data.forEach(produto => {
                    const listItem = document.createElement('li');
                    listItem.innerText = JSON.stringify(produto);
                    produtosList.appendChild(listItem);
                });
            });
    });

    document.getElementById('deleteProdutoForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const deleteById = document.getElementById('deleteById').value;

        fetch(`/produtos/${deleteById}`, {
            method: 'DELETE'
        })
            .then(response => {
                if (response.ok) {
                    document.getElementById('deleteStatus').innerText = 'Produto deletado com sucesso!';
                } else {
                    document.getElementById('deleteStatus').innerText = 'Erro ao deletar produto!';
                }
            });
    });
</script>
</body>
</html>
